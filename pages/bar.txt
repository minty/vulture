<h1>hello world</h1>

<input id=join  type=button value=join>
<input id=leave type=button value=leave>
<input id=work  type=button value=work>

<ul>
  <li>execute task</li>
  <li>- construct script tag</li>
  <li>- inject test into text body of tag</li>
  <li>- remove any existing script blocks matching our class</li>
  <li>- append to $('body') our new tag</li>
  <li>tell server we're done</li>
  <li>alert</li>
  <li>repeat</li>
</ul>

<script type="text/javascript">
  $(function() {
    console.log('hello world');

    $('#work').on('click', function(e) {
        $.ajax('/api/task/get', {
            'success': function(data) {
                alert( data.run.task.test );
            }
        });
    });

    $('#join').on('click', function(e) {
        $.ajax('/api/client/join/', {
            'success': function(data) {
                if (typeof data.joined != 'undefined') {
                    alert('joined');
                }
                else {
                    alert('failed');
                }
            }
        });
    });

    $('#leave').on('click', function(e) {
        $.ajax('/api/client/leave/', {
            'success': function(data) {
                if (typeof data.left != 'undefined') {
                    alert('left');
                }
                else {
                    alert('failed to leave');
                }
            }
        });
    });
  });
</script>
